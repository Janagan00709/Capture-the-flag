(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5405],{45728:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(96031)}])},96031:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return j}});var o,i=n(47568),a=n(26042),r=n(97582),c=n(85893),s=n(14397),u=n(57719),l=n(24847),$=n(18922),p=n(32138),d=n(10253),g=n(98396),f=n(50594),v=n(67294),b=n(2341),O=n(54942),A=n(39073),h=n(48400),m=n(86012),L=n(9473),_=n(29310),S=n(1399),Z=n(29361),I=n(62840),C=n(95357),y=function(){var t=(0,v.useState)(!1),e=t[0],n=t[1],o=(0,L.v9)(function(t){return t.profile}).activeProfile,i=S.Z.LOCATION_REQUEST_INTERVAL,a=S.Z.SHOW_COARSE_LOCATION_SHEET,r=S.Z.LOCATION_DENIED_COUNT_LIMIT,c=I.Z.PLAYBACK_COUNT,s=I.Z.LOCATION_MODAL_SKIP_COUNT;return(0,v.useEffect)(function(){var t=C.Q.getItem(s)||0;(0,Z.Q)().catch(function(){(null==o?void 0:o.profiletype)===_.oH&&a&&t<r&&C.b.getItem(c)>=i&&n(!0)})},[]),[e,n]},E=n(91081),D=n(16398),N=n(56027),P=n(41796),T=(0,N.ZL)()(function(t){return{locationSubContainer:{display:"flex",width:"26.5rem",overflowY:"unset",textAlign:"center",alignItems:"center",flexDirection:"column",padding:t.spacing(2),borderRadius:t.spacing(3),backgroundColor:t.palette.background.sheet},modalPaperStyles:{bottom:0,width:"100%",display:"flex",overflowY:"unset",textAlign:"center",alignItems:"center",position:"absolute",height:"fit-content",borderTopRightRadius:t.spacing(3),borderTopLeftRadius:t.spacing(3)},blurBackground:{backdropFilter:"blur(10px)"},closeIcon:{width:"100%",display:"flex",justifyContent:"right"},textContainer:{textAlign:"-webkit-left",paddingTop:t.spacing(1)},button:{width:"90%",height:t.spacing(4.5),marginBottom:t.spacing(2),borderRadius:t.spacing(2),backgroundColor:t.palette.primary[300],"&:hover":{backgroundColor:(0,P.Fq)(t.palette.primary[300],.9)}},buttonText:{cursor:"pointer",textTransform:"capitalize",fontSize:t.spacing(1.75)},heading:{fontSize:t.spacing(3),paddingBottom:t.spacing(2)},subHeading:{fontSize:t.spacing(1.5),color:(0,P.Fq)(t.palette.neutral[50],.8)},permissionText:{fontSize:"14px",textAlign:"-webkit-left",paddingTop:t.spacing(3)}}}),k=function(){var t=T(),e=t.classes,n=t.theme,o=(0,d.Z)(y(),2),i=o[0],a=o[1],r=(0,g.Z)(n.breakpoints.up("sm")),s=(0,v.useState)(!1),u=s[0],l=s[1],$=I.Z.PLAYBACK_COUNT,p=I.Z.LOCATION_MODAL_SKIP_COUNT,L=function(){a(!1),C.b.setItem($,0);var t=C.Q.getItem(p)||0;C.Q.setItem(p,parseInt(t,10)+1),E.ZP.track({event:E.GV.events.COARSE_LOCATION_PROMPT_UNLOADED,properties:{nativeGPSAlreadyEnabled:!u,coarseLocationAttributionAssetID:"",coarseLocationAttributionPage:"home_page",coarseLocationAction:u?"Blocked Cancel":"Cancel"}})},_=function(){navigator.geolocation&&(E.ZP.track({event:E.GV.events.NATIVE_OS_LOCATION_LOADED,properties:{nativeOSLocationAttributionAssetID:"",nativeGPSAlreadyEnabled:!u,nativeOSLocationAttributionPage:"home_page"}}),navigator.geolocation.getCurrentPosition(function(t){var e=(null==t?void 0:t.coords)||{},n=e.latitude,o=e.longitude,i=e.accuracy;a(!1),C.b.setItem($,0),(0,D.YF)({latitude:n,longitude:o,accuracy:i}),E.ZP.track({event:E.GV.events.NATIVE_OS_LOCATION_UNLOADED,properties:{nativeOSLocationAction:"Allow_web",nativeGPSAlreadyEnabled:!0,nativeOSLocationAttributionAssetID:"",nativeOSLocationAttributionPage:"home_page"}}),E.ZP.track({event:E.GV.events.COARSE_LOCATION_PROMPT_UNLOADED,properties:{nativeGPSAlreadyEnabled:!0,coarseLocationAttributionAssetID:"",coarseLocationAttributionPage:"home_page",coarseLocationAction:"Location Permission Granted"}})},function(){l(!0),E.ZP.track({event:E.GV.events.NATIVE_OS_LOCATION_UNLOADED,properties:{nativeGPSAlreadyEnabled:!1,nativeOSLocationAction:"Block_web",nativeOSLocationAttributionAssetID:"",nativeOSLocationAttributionPage:"home_page"}})},{enableHighAccuracy:!0}))};return(0,v.useEffect)(function(){i&&E.ZP.track({event:E.GV.events.COARSE_LOCATION_PROMPT_LOADED,properties:{nativeGPSAlreadyEnabled:!1,coarseLocationAttributionAssetID:"",coarseLocationAttributionPage:"home_page"}})},[i]),(0,c.jsxs)(O.Z,{fullScreen:!r,openModal:i,backdropProps:e.blurBackground,paperProps:r?e.locationSubContainer:e.modalPaperStyles,children:[(0,c.jsx)("div",{className:e.closeIcon,children:(0,c.jsx)(b.Z,{handleOnClick:L,children:(0,c.jsx)(f.Z,{})})}),(0,c.jsxs)(A.Z,{className:e.textContainer,children:[(0,c.jsx)(h.Z,{cursor:"pointer",className:e.heading,variant:h.O.HEADING5.SEMIBOLD,children:"Watch Your City's Favourites"}),(0,c.jsx)(h.Z,{cursor:"pointer",className:e.subHeading,variant:h.O.BODY1.REGULAR,children:u?"It looks like your location permission is disabled":"Allow location access to see the most trending content in your city"}),u&&(0,c.jsx)(h.Z,{className:e.permissionText,variant:h.O.BODY1.REGULAR,children:"Please enable 'Location' permission from browser settings and try again"})]}),!u&&(0,c.jsx)(m.Z,{onClick:_,stylingOptions:e.button,data:{variant:"contained"},children:(0,c.jsx)(h.Z,{component:"p",className:e.buttonText,color:n.palette.text.primary,variant:h.O.BODY3.SEMIBOLD,children:"Give Location Permission"})})]})};function x(t){var e=t.seoData,n=t.pageSchema,o=t.blocks;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)($.Z,{seoData:void 0===e?{}:e}),(void 0===n?[]:n).map(function(t,e){var n=t.schema,o=t.attributes;return(0,c.jsx)(p.Z,{attributes:o,schema:n},e)}),o.map(function(t,e){return(0,c.jsx)(u.Z,(0,a.Z)({},t),e)}),(0,c.jsx)(k,{})]})}x.getInitialProps=(o=(0,i.Z)(function(t){var e,n,o;return(0,r.__generator)(this,function(i){switch(i.label){case 0:return e=function(t){return(0,l.Z)((0,a.Z)({slug:"home"},t))},[4,(0,s.Z)(t,e)];case 1:return n=i.sent(),o={},[2,(0,a.Z)(o,n)]}})}),function(t){return o.apply(this,arguments)});var j=x},18922:function(t,e,n){"use strict";var o=n(384);e.Z=o.Z},32138:function(t,e,n){"use strict";n.d(e,{Z:function(){return u}});var o,i=n(26042),a=n(69396),r=n(85893),c=n(9008),s=n.n(c),u=function(t){var e=t.attributes,n=t.schema;return(0,r.jsx)(s(),{children:(0,r.jsx)("script",(0,a.Z)((0,i.Z)({type:"application/ld+json"},void 0===e?{}:e),{dangerouslySetInnerHTML:{__html:JSON.stringify(void 0===n?{}:n)}}))})}},14397:function(t,e,n){"use strict";var o,i,a=n(47568),r=n(26042),c=n(97582),s=n(98781),u=n(49946),l=n(26640),$=n(75395),p=n(95357),d=n(62840),g=n(6919),f=n(40362),v=(o=(0,a.Z)(function(t){var e,n,o,i,a,r,s,u,l,$,p,d,g;return(0,c.__generator)(this,function(c){switch(c.label){case 0:return e=t.parser,o=void 0===(n=t.slug)?null:n,a=void 0===(i=t.query)?null:i,s=void 0===(r=t.callback)?function(){}:r,[4,e(((p={}).onlyMeta=!0,p)).catch(function(){return{}})];case 1:return l=(u=c.sent()).seoData,$=u.pageSchema,s(),(d=(0,f.s4)()).props.slug=o,d.props.query=a,[2,((g={}).seoData=l,g.pageSchema=$,g.blocks=[d],g)]}})}),function(t){return o.apply(this,arguments)}),b=(i=(0,a.Z)(function(t,e){var n,o,i,a,b,O,A,h,m,L,_,S,Z,I,C,y,E,D,N,P,T,k,x,j,G,R;return(0,c.__generator)(this,function(c){switch(c.label){case 0:if(o=t.req,i=t.res,a=t.query,b=$.Z.getConfig(),O=(0,f.nb)(),h={},m={},!l.j&&(A=(0,u.Do)(s.Z.LOGGED_IN,(h.req=o,h))))return[2,v((m.parser=e,m.slug=o.url,m.query=a,m))];if(L={},l.j&&p.Q.getObject(d.Z.LOGIN_REFRESH)&&(0,u.Do)(s.Z.LOGGED_IN))return[2,v((L.parser=e,L.callback=function(){return p.Q.removeItem(d.Z.LOGIN_REFRESH)},L))];return[4,(n=l.j&&(null==b?void 0:b.cards)?function(){return e({layoutConfig:b}).then(function(t){return{layoutConfig:b,data:t}}).catch(function(){return{layoutConfig:b,data:{blocks:[O]}}})}:function(){return(0,g._)(e).then(function(t){return(0,r.Z)({},t)}).catch(function(){return{data:{blocks:[O]}}})})()];case 1:if(y={},E={},Z=void 0===(S=(_=c.sent()).layoutConfig)?y:S,j={},N=void 0===(D=(C=void 0===(I=_.data)?E:I).seoData)?j:D,T=void 0===(P=C.pageSchema)?[]:P,G={},!(null==(x=void 0===(k=C.blocks)?[]:k)?void 0:x.length)||(null==x?void 0:x.every(function(t){return Array.isArray(t)&&!(null==t?void 0:t.length)})))return[2,(G.layoutConfig=Z,G.seoData=N,G.pageSchema=T,G.blocks=[O],G)];return l.j||(null==N?void 0:N.title)||(i.statusCode=404),[2,((R={}).layoutConfig=Z,R.seoData=N,R.pageSchema=T,R.blocks=x,R)]}})}),function(t,e){return i.apply(this,arguments)});e.Z=b}},function(t){t.O(0,[4885,7288,8100,6886,7940,8195,572,519,158,7719,9774,2888,179],function(){return t(t.s=45728)}),_N_E=t.O()}]);